<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
--><html>
	<head>
		<title>tEam TWeNty sEVen</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">
 		<!-- Wrapper -->
			<div id="wrapper">
 				<!-- Header -->
					<div id="tt">
						<div class="content">
							<div class="inner">
                <h1>Milestone 1</h1>
                <ul>
									<h2>Goals: </h2>


	<p>The purpose of this milestone was to design a motion control system for our robot. </p>

	<p>The tasks we set out to complete included:</p>

	<ul>
	<li>Getting our robot to successfully follow a line </li>

	<li>Getting our robot to successfully traverse a grid in a figure eight </li>
	</ul>
			
	<p>Additionally, we focused on: </p>

	<ul>
	<li>Developing a robust control system, and </li>

	<li>Getting our robot to complete these tasks at a reasonably high speed </li>
	</ul>


	<h2>Materials: </h2>

	<p>The only materials used for this milestone that weren’t used in lab one were 3 QTR-1A reflectance sensors (<a href="https://www.pololu.com/product/958">datasheet here</a>).</p>

	<p>These sensors have three pins, VIN, GND, and OUT. Each sensor outputs a voltage at its OUT pin that corresponds with the lightness or darkness of the surface below it. </p>

	<p>In our setup, the OUT pin of each sensor is tied to a separate analog input of the Arduino Uno controlling our robot. As such, each of these analog inputs will read in a value between 0 and 1023 corresponding to the lightness or darkness of the area under it. </p>

			<h2>Line Following </h2>

	<p>We equipped our robot with two line sensors in its front, designed to be far enough apart to straddle a line of electrical tape (see image below).</p>

 	<img src="FRONTOFROBOT.jpg" alt="Front of Robot">
			
	<p>We modified the original blink code so that we could blink LEDs connected to the board's other digital outputs. We connected the LEDs in series with 330Ω resistors to the Arduino's digital output pins, in order to ensure that its max current wasn't exceeded. The modifications are shown below:</p>

	<p><em>Modifications to blink code:</em></p>

	<p><code>
	void setup() {<br>
	  // initialize digital pin LED_BUILTIN as an output.<br>
	  pinMode(2, OUTPUT);<br>
	  pinMode(3, OUTPUT);<br>
	  pinMode(4, OUTPUT);<br>
	  pinMode(5, OUTPUT);<br>
	  pinMode(6, OUTPUT);<br>
	  pinMode(7, OUTPUT);<br>
	  pinMode(8, OUTPUT);<br>
	  pinMode(9, OUTPUT);<br>
	  pinMode(10, OUTPUT);<br>
	  pinMode(11, OUTPUT);<br>
	  pinMode(12, OUTPUT);<br>
	  pinMode(13, OUTPUT);<br>
	}</p><br>
<br>
	<p>// the loop function runs over and over again forever<br>
	void loop() {<br>
	  digitalWrite(2, HIGH);   // turn the LED on (HIGH is the voltage level)<br>
	  digitalWrite(3, HIGH);<br>
	  digitalWrite(4, HIGH);<br>
	  digitalWrite(5, HIGH);<br>
	  digitalWrite(6, HIGH);<br>
	  digitalWrite(7, HIGH);<br>
	  digitalWrite(8, HIGH);<br>
	  digitalWrite(9, HIGH);<br>
	  digitalWrite(10, HIGH);<br>
	  digitalWrite(11, HIGH);<br>
	  digitalWrite(12, HIGH);<br>
	  digitalWrite(13, HIGH);<br>
	  delay(500); <br>
	  // wait for a second<br>
	  digitalWrite(2, LOW);   // turn the LED on (LOW is the voltage level)<br>
	  digitalWrite(3, LOW);<br>
	  digitalWrite(4, LOW);<br>
	  digitalWrite(5, LOW);<br>
	  digitalWrite(6, LOW);<br>
	  digitalWrite(7, LOW);<br>
	  digitalWrite(8, LOW);<br>
	  digitalWrite(9, LOW);<br>
	  digitalWrite(10, LOW);<br>
	  digitalWrite(11, LOW);<br>
	  digitalWrite(12, LOW);<br>
	  digitalWrite(13, LOW);<br>
	  delay(500);                       // wait for a second<br>
	}
</code></p>

	<p>First we tried it with one LED. Then we tried it with a bunch of LEDs. They all worked!</p>

	<iframe width="560" height="315" src="https://www.youtube.com/embed/f4iUFhDM3o4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

	<iframe width="560" height="315" src="https://www.youtube.com/embed/mX8vcqh-6oI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

	<p>Having confirmed the functionality of the digital output pins, we turned next to the analog input pins.  We tested these by using the potentiometer to create a simple voltage divider circuit, shown below:</p>

	<p><em>Potentiometer Wiring Setup:</em></p>

	<p><img src="/media/PotentiometerSetup.png" alt="Potentiometer Setup" />  </p>

	<p>We initialized the serial monitor output to read the value of the analog pin every second:</p>

	<p><em>Analog Read Function:</em></p>

	<p><code>
	int analogPin = 0;<br>
	void setup() {<br>
	  // put your setup code here, to run once:<br>
	  Serial.begin(9600);<br>
	}</p><br><br>

	<p>void loop() {<br>
	  // put your main code here, to run repeatedly:<br>
	  int val = analogRead(analogPin);<br>
	  float inV = val*.0049;<br>
	  Serial.print(inV);<br>
	  Serial.println (" V");<br>
	  delay(1000);<br>
	}<br>
</code></p>

	<p>By adjusting the resistance of the potentiometer (turning the screw on top), we were able to adjust the voltage read by the analog input pins.</p>

	<p><em>Potentiometer Analog Value Output:</em></p>

	<iframe width="560" height="315" src="https://www.youtube.com/embed/4LRD3s4hR_s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

	<p>We repeated this procedure for each analog input pin on the board to confirm functionality.</p>

	<p>Next, we adapted this code to create an pseudo-analog output in the form of a pulse-width modulated (PWM) digital output.  By continuing to use our potentiometer/voltage divider circuit as input to the Arduino, we were able to map our analog input value to a duty cycle for our PWM output.  </p>

	<p>The arduino's so-called "analog output" is limited by the 8-bit bit depth of the digital output pin, restricting the possible output values to between 0 and 255.  The conversion from the 10-bit input to the 8-bit output as well as the writing process is shown in our code below: </p>

	<p><em>Analog Write Function:</em></p>

	<p><code>
	int analogPin = 0;<br>
	int ledPin = 3;<br>
	void setup() {<br>
	  // put your setup code here, to run once:<br>
	  Serial.begin(9600);<br>
	}</p><br>

	<p>void loop() {<br>
	  // put your main code here, to run repeatedly:<br>
	  int val = analogRead(analogPin);<br>
	  float convert = (float(val)/1023) * 255;<br>
	  int pwm = int(convert);<br>
	  Serial.println(val);<br>
	  Serial.println(pwm);<br>
	  analogWrite(ledPin, pwm);<br>
	  delay(250);<br>
	}<br>
</code></p>

	<p>We put an LED and resistor in series with our PWM output pin, and by adjusting the potentiometer’s resistance, we were able to change the LED’s brightness.</p>

	<p><em>Changing LED Brightness:</em></p>

	<iframe width="560" height="315" src="https://www.youtube.com/embed/9KBB9-9VRFg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

	<p>Next, we used these PWM output pins to drive our servos, which would eventually mobilize our robot.  By including Arduino’s Servo library in the header of our program, we were able to write a range of rotation speeds to the servo.  Once more, we implemented our potentiometer/voltage divider circuit here, allowing us to physically adjust the Servo’s rotation speed during operation.</p>

	<p><em>Servo Wiring Setup:</em></p>

	<p><img src="/media/servo_wiring.png" alt="Servo Wiring" /></p>

	<p><em>Servo Motor Controls Using Potentiometer:</em></p>

	<iframe width="560" height="315" src="https://www.youtube.com/embed/Yzg2YTF_dRs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

	<p>Finally, we programmed our robot to move in a square, its first autonomous task! </p>

	<p><em>Implementation of Autonomous Task:</em></p>

	<p><code>
	Servo servoL;<br>
	Servo servoR;<br>
	void setup() {<br>
	// put your setup code here, to run once:<br>
	Serial.begin(9600);<br>
	servoL.attach(3);<br>
	servoR.attach(9);<br>
	}</p><br>
	<p>void loop() {<br>
	// put your main code here, to run repeatedly:<br>
	servoL.write(180);<br>
	servoR.write(0);<br>
	delay(1000);<br>
	servoL.write(180);<br>
	servoR.write(90);<br>
	delay(1000);<br>
	}</p>
	<p></code>

	<em>Watch our robot make a lil square!!</em></p>

	<iframe width="560" height="315" src="https://www.youtube.com/embed/Fo20T0LzfJ0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
							</div>
						</div>
					</div>


									<!-- Footer -->
										<footer id="footer">
											<p class="copyright">&copy; Untitled. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
										</footer>
					 			</div>
					 		<!-- BG -->
								<div id="bg"></div>
					 		<!-- Scripts -->
								<script src="assets/js/jquery.min.js"></script>
								<script src="assets/js/browser.min.js"></script>
								<script src="assets/js/breakpoints.min.js"></script>
								<script src="assets/js/util.js"></script>
								<script src="assets/js/main.js"></script>
					 	</body>
					</html>
